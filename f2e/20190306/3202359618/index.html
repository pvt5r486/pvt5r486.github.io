<!-- build time:Fri Mar 06 2020 16:05:03 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html class="theme-next pisces" lang="zh-TW"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="google-site-verification" content="google-site-verification=cgzd8eZ9K7AKW48qCaRaNfFM8z-k2DS5WYENk9sSOn8"><link rel="stylesheet" href="/lib/fancybox/source/jquery.fancybox.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2"><link rel="stylesheet" href="/css/main.css?v=7.1.1"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-pvt5r486.png?v=7.1.1"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-pvt5r486.png?v=7.1.1"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-pvt5r486.png?v=7.1.1"><link rel="mask-icon" href="/images/logo.svg?v=7.1.1" color="#222"><script id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Pisces",version:"7.1.1",sidebar:{position:"left",display:"post",offset:12,onmobile:!1,dimmer:!1},back2top:!0,back2top_sidebar:!1,fancybox:!0,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!1,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="在受到前面兩小節的洗禮後，對於 hoisting 應該有更明確的認知，這節影片要帶領我們從 ECMAScript 了解 hoisting 的原理為何。"><meta name="keywords" content="JavaScript,hoisting"><meta property="og:type" content="article"><meta property="og:title" content="[JavaScriptWeird]No.59 hoisting 的原理為何"><meta property="og:url" content="http://pvt5r486.github.io/f2e/20190306/3202359618/index.html"><meta property="og:site_name" content="pvt5r486&#39;s Blog"><meta property="og:description" content="在受到前面兩小節的洗禮後，對於 hoisting 應該有更明確的認知，這節影片要帶領我們從 ECMAScript 了解 hoisting 的原理為何。"><meta property="og:locale" content="zh-TW"><meta property="og:image" content="https://cdn-images-1.medium.com/max/800/0*R2Pp4BuJiptMIOC1"><meta property="og:image" content="https://cdn-images-1.medium.com/max/800/1*cc85KDCTW5BzZ1sgCyKt1A.png"><meta property="og:updated_time" content="2020-02-16T05:58:30.958Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="[JavaScriptWeird]No.59 hoisting 的原理為何"><meta name="twitter:description" content="在受到前面兩小節的洗禮後，對於 hoisting 應該有更明確的認知，這節影片要帶領我們從 ECMAScript 了解 hoisting 的原理為何。"><meta name="twitter:image" content="https://cdn-images-1.medium.com/max/800/0*R2Pp4BuJiptMIOC1"><link rel="alternate" href="/rss.xml" title="pvt5r486's Blog" type="application/atom+xml"><link rel="canonical" href="http://pvt5r486.github.io/f2e/20190306/3202359618/"><script id="page.configurations">CONFIG.page={sidebar:""}</script><title>[JavaScriptWeird]No.59 hoisting 的原理為何 | pvt5r486's Blog</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-139945712-1"></script><script>function gtag(){dataLayer.push(arguments)}var host=window.location.hostname;"localhost"!==host&&(window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-139945712-1"))</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-9768592799295604",enable_page_level_ads:!0})</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-TW"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">pvt5r486's Blog</span> <span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">喜歡烏龜的宅宅工程師</h1></div><div class="site-nav-toggle"><button aria-label="切換導航欄"><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首頁</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>標籤</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分類</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>歸檔</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜尋</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜尋..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><a href="https://github.com/pvt5r486" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="external nofollow noopener noreferrer" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://pvt5r486.github.io/f2e/20190306/3202359618/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="pvt5r486"><meta itemprop="description" content="菜鳥前端筆記 & 育龜日記"><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="pvt5r486's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">[JavaScriptWeird]No.59 hoisting 的原理為何</h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">發表於</span> <time title="創建時間：2019-03-06 04:02:17" itemprop="dateCreated datePublished" datetime="2019-03-06T04:02:17+08:00">2019-03-06</time> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新於</span> <time title="修改時間：2020-02-16 13:58:30" itemprop="dateModified" datetime="2020-02-16T13:58:30+08:00">2020-02-16</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分類於</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/f2e/" itemprop="url" rel="index"><span itemprop="name">前端學習</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在受到前面兩小節的洗禮後，對於 hoisting 應該有更明確的認知，這節影片要帶領我們從 ECMAScript 了解 hoisting 的原理為何。</p><p><img src="https://cdn-images-1.medium.com/max/800/0*R2Pp4BuJiptMIOC1" alt></p><h2 id="hoisting-amp-scope-小測驗"><a href="#hoisting-amp-scope-小測驗" class="headerlink" title="hoisting &amp; scope 小測驗"></a>hoisting &amp; scope 小測驗</h2><p>首先，讓我們打鐵趁熱，來份 hoisting 的考題吧，說不定面試會考哦？<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">var a = 1;  </span><br><span class="line">function test()&#123;  </span><br><span class="line">  console.log(&apos;1.&apos;, a);  </span><br><span class="line">  var a = 7;  </span><br><span class="line">  console.log(&apos;2.&apos;, a);  </span><br><span class="line">  a++;  </span><br><span class="line">  var a;  </span><br><span class="line">  inner();  </span><br><span class="line">  console.log(&apos;4.&apos;, a);  </span><br><span class="line">  function inner()&#123;  </span><br><span class="line">    console.log(&apos;3.&apos;, a);  </span><br><span class="line">    a = 30;  </span><br><span class="line">    b = 200;  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">test();  </span><br><span class="line">console.log(&apos;5.&apos;, a);  </span><br><span class="line">a = 70;  </span><br><span class="line">console.log(&apos;6.&apos;, a);  </span><br><span class="line">console.log(&apos;7.&apos;, b);</span><br></pre></td></tr></table></figure><p></p><p>請依序寫出印出來的答案是多少。</p><p>還沒看解答之前我的答案是這樣，我把內容調換過用來幫助自己思考。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">var a = 1;  </span><br><span class="line">function test()&#123;  </span><br><span class="line">  function inner()&#123;  </span><br><span class="line">    console.log(&apos;3.&apos;, a); // 8  </span><br><span class="line">    a = 30;  </span><br><span class="line">    b = 200;  </span><br><span class="line">  &#125;  </span><br><span class="line">  var a;  </span><br><span class="line">  console.log(&apos;1.&apos;, a); // undefined  </span><br><span class="line">  a = 7;  </span><br><span class="line">  console.log(&apos;2.&apos;, a); // 7  </span><br><span class="line">  a=a+1;  </span><br><span class="line">  var a;  </span><br><span class="line">  inner();  </span><br><span class="line">  console.log(&apos;4.&apos;, a); // 8</span><br><span class="line"></span><br><span class="line">&#125;  </span><br><span class="line">test();  </span><br><span class="line">console.log(&apos;5.&apos;, a); // 1  </span><br><span class="line">a = 70;  </span><br><span class="line">console.log(&apos;6.&apos;, a); // 70  </span><br><span class="line">console.log(&apos;7.&apos;, b); // 200</span><br></pre></td></tr></table></figure><p></p><p>後來對照答案後，發現<strong>第四題粗心寫錯了，應該是印出 30</strong> 才對。</p><p>但是其他都如同我想的，這代表先前的學習、寫文章記錄加深印象是有效的，往後我也會繼續這麼做。</p><h2 id="我判斷答案時用到的觀念有："><a href="#我判斷答案時用到的觀念有：" class="headerlink" title="我判斷答案時用到的觀念有："></a>我判斷答案時用到的<strong>觀念</strong>有：</h2><ul><li>ECMAScript基本觀念</li><li>hoisting 順序</li><li>變數作用域與範圍鏈</li><li>var 的特性<blockquote><p><strong>可…可惡，JavaScript 的陷阱真多！</strong></p></blockquote></li></ul><h2 id="ECMAScript-如何解釋-hoisting"><a href="#ECMAScript-如何解釋-hoisting" class="headerlink" title="ECMAScript 如何解釋 hoisting"></a>ECMAScript 如何解釋 hoisting</h2><p>ECMAScript 是制定 JavaScript 的標準，因此也可以說是 JavaScript 的聖經，本節影片的作者要帶領我們如何透過 ECMAScript 的文件了解 JavaScript 的行為。</p><p>隨著時間過去 ECMAScript 的文件也會越來越多，但並不會影響原作者想要傳達的目的，本節會使用較舊的版本介紹。</p><h3 id="本節使用文件"><a href="#本節使用文件" class="headerlink" title="本節使用文件"></a>本節使用文件</h3><ul><li><a href="https://www.ecma-international.org/publications/files/ECMA-ST-ARCH/ECMA-262,%203rd%20edition,%20December%201999.pdf" rel="external nofollow noopener noreferrer" target="_blank">ECMAScript — Ecma-262 ,1999年12月</a> 第 10 節</li></ul><h3 id="執行環境-Execution-Contexts"><a href="#執行環境-Execution-Contexts" class="headerlink" title="執行環境 (Execution Contexts)"></a>執行環境 (Execution Contexts)</h3><blockquote><p><strong>以下節錄自文件</strong><br>When control is transferred to ECMAScript executable code, control is entering an execution context. Active execution contexts logically form a stack. The top execution context on this logical stack is the running execution context</p></blockquote><p>不過我拿去 google 翻譯看完之後發現根本不懂這敘述再寫什麼 (汗</p><p>但就之前的筆記，我對於<strong>執行環境</strong>的認知是：</p><ul><li>當 JavaScript 開始運行時，會先建立一個全域執行環境</li><li>之後每進入一個函式 function 就會再度創造一個執行環境</li><li>而這些執行環境會按照執行順序被堆疊起來，稱為執行堆</li><li>執行堆最高的會優先被執行，執行完畢後將被移出執行堆</li><li>當全域執行環境也被移出時，代表 JavaScript 程式已經運行完畢</li></ul><p><strong>以圖片來總結上面那些話，大概就長這樣</strong>：</p><p><img src="https://cdn-images-1.medium.com/max/800/1*cc85KDCTW5BzZ1sgCyKt1A.png" alt="資料來源: [我知道你懂 hoisting，可是你了解到多深？](https://blog.techbridge.cc/2018/11/10/javascript-hoisting/)"><br>資料來源: <a href="https://blog.techbridge.cc/2018/11/10/javascript-hoisting/" rel="external nofollow noopener noreferrer" target="_blank">我知道你懂 hoisting，可是你了解到多深？</a></p><h3 id="變數初始化-Variable-Instantiation"><a href="#變數初始化-Variable-Instantiation" class="headerlink" title="變數初始化 (Variable Instantiation)"></a>變數初始化 (Variable Instantiation)</h3><blockquote><p><strong>以下節錄自文件</strong><br>Every execution context has associated with it a <strong>variable object</strong>.Variables and functions declared in the source text are added as properties of the variable object.On entering an execution context, the properties are bound to the variable object in the following order:</p></blockquote><p>文件下面還有很多落落長的敘述，有興趣可以點進去看。</p><h3 id="我理解的大意是"><a href="#我理解的大意是" class="headerlink" title="我理解的大意是"></a>我理解的大意是</h3><ul><li>每一個執行環境都有一個<strong>變數物件</strong> (variable object)</li><li>在執行環境內宣告的函式或變數都會被加到變數物件內成為屬性 (properties)</li><li>當進入執行環境時，屬性會按照順序綁定到變數物件上</li><li>當進入執行環境時，會把函式的參數放到變數物件上，值就是當時呼叫這個函式所帶入的值，若未傳入值則初始化為 <code>undefined</code></li><li>對於函式，如果變數物件已經有同名的屬性，則取代裡面的值</li><li>對於變數，如果宣告的變數已經重複，則什麼事情都不會發生，若未重複則將該變數初始化為 <code>undefined</code></li></ul><p><strong>白話的用一些程式表示</strong><br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">variableObject: &#123;  </span><br><span class="line">  a: 1  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function test()&#123;  </span><br><span class="line">  var a = 1;  </span><br><span class="line">&#125;  </span><br><span class="line">test();</span><br></pre></td></tr></table></figure><p></p><ul><li><p>當 <code>test</code> 函式被執行，執行環境建立並進入，裡面宣告的 <code>a</code> 會被加到變數物件內成為屬性</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">variableObject: &#123;  </span><br><span class="line">  a: 123,  </span><br><span class="line">  b: undefined  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function test(a, b)&#123;&#125;  </span><br><span class="line">test(123);</span><br></pre></td></tr></table></figure></li><li><p>當進入執行環境時，會把函式的參數放到變數物件上，如果未傳入參數的值，則初始化為 <code>undefined</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">variableObject: &#123;  </span><br><span class="line">  a: point to function a,  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function test(a)&#123;  </span><br><span class="line">  function a()&#123;&#125;  </span><br><span class="line">&#125;  </span><br><span class="line">test(123);</span><br></pre></td></tr></table></figure></li><li><p>對於函式，如果變數物件已經有同名的屬性，則取代裡面的值</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">variableObject: &#123;  </span><br><span class="line">  a: 10  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function test(a)&#123;  </span><br><span class="line">  var a;  </span><br><span class="line">&#125;  </span><br><span class="line">test(10);</span><br></pre></td></tr></table></figure></li><li><p>對於變數，如果宣告的變數已經重複，則什麼事情都不會發生</p></li></ul><h2 id="後記"><a href="#後記" class="headerlink" title="後記"></a>後記</h2><p>透過 ECMAScript 的文件解釋，我們可以理解原來 hoisting 背後的原理是這樣，相較於前面我們對於 hoisting 的觀察是較為表面的 (所以那個時候都說，我們可以把這一段程式碼想成 …)</p><p>但現在我們透過 ECMAScript 文件了解這些規則，接下來我們要嘗試用這一套規則來回答一開始的問題。</p></div><footer class="post-footer"><div class="post-tags"><a href="/tags/JavaScriptWeird/" rel="tag"># JavaScriptWeird</a> <a href="/tags/學習筆記/" rel="tag"># 學習筆記</a> <a href="/tags/JS201/" rel="tag"># JS201</a> <a href="/tags/支線/" rel="tag"># 支線</a></div><div class="post-widgets"><div class="social_share"><div><script src="//cdn.jsdelivr.net/npm/ilyabirman-likely@2/release/likely.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/ilyabirman-likely@2/release/likely.css"><div class="likely"><div class="twitter">Tweet</div><div class="facebook">Share</div></div></div></div></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/f2e/20190305/1172397453/" rel="next" title="[JavaScriptWeird]No.58 hoisting 順序"><i class="fa fa-chevron-left"></i> [JavaScriptWeird]No.58 hoisting 順序</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/f2e/20190306/3610645134/" rel="prev" title="[JavaScriptWeird]No.60 cosplay JS 引擎">[JavaScriptWeird]No.60 cosplay JS 引擎 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div><div><div class="comments" id="comments"><div id="disqus_thread"><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目錄</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">本站概要</li></ul><div class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="pvt5r486"><p class="site-author-name" itemprop="name">pvt5r486</p><div class="site-description motion-element" itemprop="description">菜鳥前端筆記 & 育龜日記</div></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">167</span> <span class="site-state-item-name">文章</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">3</span> <span class="site-state-item-name">分類</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">30</span> <span class="site-state-item-name">標籤</span></a></div></nav><div class="feed-link motion-element"><a href="/rss.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/pvt5r486" title="GitHub &rarr; https://github.com/pvt5r486" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:pvt5r486@gmail.com" title="E-Mail &rarr; mailto:pvt5r486@gmail.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-block"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> 友情 ♂ 連結</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://hsiangfeng.github.io/" title="https://hsiangfeng.github.io/" rel="noopener" target="_blank">Ray's Blog</a></li></ul></div></div></div><div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hoisting-amp-scope-小測驗"><span class="nav-number">2.</span> <span class="nav-text">hoisting &amp; scope 小測驗</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#我判斷答案時用到的觀念有："><span class="nav-number">3.</span> <span class="nav-text">我判斷答案時用到的觀念有：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ECMAScript-如何解釋-hoisting"><span class="nav-number">4.</span> <span class="nav-text">ECMAScript 如何解釋 hoisting</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#本節使用文件"><span class="nav-number">4.1.</span> <span class="nav-text">本節使用文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#執行環境-Execution-Contexts"><span class="nav-number">4.2.</span> <span class="nav-text">執行環境 (Execution Contexts)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#變數初始化-Variable-Instantiation"><span class="nav-number">4.3.</span> <span class="nav-text">變數初始化 (Variable Instantiation)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#我理解的大意是"><span class="nav-number">4.4.</span> <span class="nav-text">我理解的大意是</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#後記"><span class="nav-number">5.</span> <span class="nav-text">後記</span></a></li></ol></div></div></div><div class="links-of-blogroll-title"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9768592799295604" data-ad-slot="7569707603" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2020</span> <span class="with-love" id="animate"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">轉載時請附上作者與原文連結</span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div><script>"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script src="/lib/jquery/index.js?v=2.1.3"></script><script src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script src="/lib/fancybox/source/jquery.fancybox.pack.js"></script><script src="/js/utils.js?v=7.1.1"></script><script src="/js/motion.js?v=7.1.1"></script><script src="/js/affix.js?v=7.1.1"></script><script src="/js/schemes/pisces.js?v=7.1.1"></script><script src="/js/scrollspy.js?v=7.1.1"></script><script src="/js/post-details.js?v=7.1.1"></script><script src="/js/next-boot.js?v=7.1.1"></script><script>function loadComments(){var t=document,e=t.createElement("script");e.src="https://pvt5r486-github-io.disqus.com/embed.js",e.setAttribute("data-timestamp",""+ +new Date),(t.head||t.body).appendChild(e)}var disqus_config=function(){this.page.url="http://pvt5r486.github.io/f2e/20190306/3202359618/",this.page.identifier="f2e/20190306/3202359618/",this.page.title="[JavaScriptWeird]No.59 hoisting 的原理為何"};loadComments()</script><script>function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var e=$("#local-search-input");e.attr("autocapitalize","none"),e.attr("autocorrect","off"),e.focus()}var isfetched=!1,isXml=!0,search_path="search.json";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(e){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(e,t,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:e,dataType:isXml?"xml":"json",async:!0,success:function(e){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():e,r=document.getElementById(t),s=document.getElementById(o),a=function(){var e=r.value.trim().toLowerCase(),t=e.split(/[\s\-]+/);t.length>1&&t.push(e);var o=[];if(e.length>0&&n.forEach(function(n){function r(t,o,n,r){for(var s=r[r.length-1],a=s.position,i=s.word,l=[],h=0;a+i.length<=n&&0!=r.length;){i===e&&h++,l.push({position:a,length:i.length});var p=a+i.length;for(r.pop();0!=r.length&&(s=r[r.length-1],a=s.position,i=s.word,p>a);)r.pop()}return c+=h,{hits:l,start:o,end:n,searchTextCount:h}}function s(e,t){var o="",n=t.start;return t.hits.forEach(function(t){o+=e.substring(n,t.position);var r=t.position+t.length;o+='<b class="search-keyword">'+e.substring(t.position,r)+"</b>",n=r}),o+=e.substring(n,t.end)}var a=!1,i=0,c=0,l=n.title.trim(),h=l.toLowerCase(),p=n.content.trim().replace(/<[^>]+>/g,""),u=p.toLowerCase(),f=decodeURIComponent(n.url).replace(/\/{2,}/g,"/"),d=[],g=[];if(""!=l&&(t.forEach(function(e){function t(e,t,o){var n=e.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(t=t.toLowerCase(),e=e.toLowerCase());(s=t.indexOf(e,r))>-1;)a.push({position:s,word:e}),r=s+n;return a}d=d.concat(t(e,h,!1)),g=g.concat(t(e,u,!1))}),(d.length>0||g.length>0)&&(a=!0,i=d.length+g.length)),a){[d,g].forEach(function(e){e.sort(function(e,t){return t.position!==e.position?t.position-e.position:e.word.length-t.word.length})});var v=[];0!=d.length&&v.push(r(l,0,l.length,d));for(var $=[];0!=g.length;){var C=g[g.length-1],m=C.position,x=C.word,w=m-20,y=m+80;0>w&&(w=0),y<m+x.length&&(y=m+x.length),y>p.length&&(y=p.length),$.push(r(p,w,y,g))}$.sort(function(e,t){return e.searchTextCount!==t.searchTextCount?t.searchTextCount-e.searchTextCount:e.hits.length!==t.hits.length?t.hits.length-e.hits.length:e.start-t.start});var T=parseInt("1");T>=0&&($=$.slice(0,T));var b="";b+=0!=v.length?"<li><a href='"+f+"' class='search-result-title'>"+s(l,v[0])+"</a>":"<li><a href='"+f+"' class='search-result-title'>"+l+"</a>",$.forEach(function(e){b+="<a href='"+f+'\'><p class="search-result">'+s(p,e)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:c,hitCount:i,id:o.length})}}),1===t.length&&""===t[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x"></i></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>';else{o.sort(function(e,t){return e.searchTextCount!==t.searchTextCount?t.searchTextCount-e.searchTextCount:e.hitCount!==t.hitCount?t.hitCount-e.hitCount:t.id-e.id});var a='<ul class="search-result-list">';o.forEach(function(e){a+=e.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(e){e.stopPropagation(),isfetched===!1?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(e){e.stopPropagation()}),$(document).on("keyup",function(e){var t=27===e.which&&$(".search-popup").is(":visible");t&&onPopupClose()})</script><script src="/lib/bookmark/bookmark.min.js?v=1.0"></script><script>bookmark.scrollToMark("auto","#更多")</script><script>$(".highlight").not(".gist .highlight").each(function(t,e){var n=$("<div>").addClass("highlight-wrap");$(e).after(n),n.append($("<button>").addClass("copy-btn").append("複製").on("click",function(t){var e=$(this).parent().find(".code").find(".line").map(function(t,e){return $(e).text()}).toArray().join("\n"),n=document.createElement("textarea"),o=window.pageYOffset||document.documentElement.scrollTop;n.style.top=o+"px",n.style.position="absolute",n.style.opacity="0",n.readOnly=!0,n.value=e,document.body.appendChild(n),n.select(),n.setSelectionRange(0,e.length),n.readOnly=!1;var i=document.execCommand("copy");i?$(this).text("複製成功"):$(this).text("複製失敗"),n.blur(),$(this).blur()})).on("mouseleave",function(t){var e=$(this).find(".copy-btn");setTimeout(function(){e.text("複製")},300)}).append(e)})</script></body></html><!-- rebuild by neat -->